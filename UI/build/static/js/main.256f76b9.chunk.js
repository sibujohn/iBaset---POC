(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t,r){"use strict";r.r(t);r(44),r(22),r(46),r(47),r(48);var s=r(0),n=r.n(s),a=r(25),o=r(16),c=r(20),i=r.n(c),l=(r(63),r(7)),u=r(8),m=r(10),d=r(9),p=r(11),E=(r(64),r(66),r(68),r(107)),h=r(108),f=r(109),O=r(41),S=r(4),I=function(e){return fetch(e)},L=function(e,t){return fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})},b="http://localhost:4000/api",C=b+"/order",v=function(e){return function(t){e({type:"SEARCH_CUSTOMER"}),I("http://localhost:4000/api/customer/search/"+t.value).then(function(e){return e.json()}).then(function(t){e({type:"SEARCH_CUSTOMER_SUCCESS",customers:t})}).then(function(t){e({type:"SEARCH_CUSTOMER_FAILURE",error:"Error Message"})})}},N=function(e){return function(){e({type:"CLEAR_CUSTOMERS"})}},T=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={customerName:"Customer Name"},r}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"brand-title mx-4"},n.a.createElement("span",null,"Customer Lookup"),n.a.createElement("h5",null,this.props.selectedCustomer&&this.props.selectedCustomer.customername))}}]),t}(s.Component),g=r(37),R=r.n(g),_=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=function(t,r){t.stopPropagation(),e.props.customerSelected(r)},r=this.props,s=r.searchText,a=r.customers,o=r.SearchCustomers,c=r.ClearCustomers,i={placeholder:"Search customer..",value:s,onChange:function(t){e.props.updateCustomerValue(t.target.value)}};return n.a.createElement("div",{className:"tools-box w-50 mr-4 d-flex flex-row align-items-center"},n.a.createElement("div",{className:"search-box"},n.a.createElement("div",{className:"input-group input-group-sm"},n.a.createElement(R.a,{suggestions:a,onSuggestionsFetchRequested:o,onSuggestionsClearRequested:c,getSuggestionValue:function(e){return e.customerid},renderSuggestion:function(e){return n.a.createElement("span",{onClick:function(r){return t(r,e)}},e.customername)},inputProps:i}),n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text"},n.a.createElement("i",{className:"fas fa-search"}))))),n.a.createElement("div",{className:"user-box ml-4"},n.a.createElement("span",{className:"user-avathar-link"},n.a.createElement("img",{alt:"",className:"user-avathar img img-fluid",src:"./images/a5.png"}))))}}]),t}(s.Component),U=Object(o.b)(function(e){var t=e.homeState.componentState;return{searchText:t.searchText,customers:t.customers}},function(e){return{SearchCustomers:v(e),ClearCustomers:N(e)}})(_),y=r(38),j=r(39),M=r(17),D=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(m.a)(this,Object(d.a)(t).call(this,e))).sortOptions=[{label:"Most Recent",value:"desc"},{label:"Old",value:"asc"}],r.onVirtualScroll=function(e){r.props.lazyLoadOrders(e.first)},r.selectSort=function(e){var t=r.sortOptions.filter(function(t){return t.value===e.value});r.setState({selectedSort:t[0]}),r.props.sortLoadOrders({sortby:"date",sorthow:e.value})},r.selectOrder=function(e){r.props.selectOrder(e)},r.state={selectedSort:{label:"Most Recent",value:"desc"}},r}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"list-cover"},n.a.createElement("div",{className:"sort-select"},this.props.selectedCustomer&&n.a.createElement(y.Dropdown,{value:this.state.selectedSort.value,options:this.sortOptions,onChange:this.selectSort})),n.a.createElement("div",{className:"list-table"},n.a.createElement(j.DataTable,{value:this.props.orders,scrollable:!0,virtualScroll:!0,virtualRowHeight:30,rows:20,totalRecords:this.props.orderOptions.records,lazy:!0,onVirtualScroll:this.onVirtualScroll,selectionMode:"single",selection:this.props.selectedOrder,onSelectionChange:function(t){return e.selectOrder(t.value)},loading:this.props.orderOptions.loading},n.a.createElement(M.Column,{field:"ordernumber",header:"Order Number"}),n.a.createElement(M.Column,{field:"date",header:"Date"}),n.a.createElement(M.Column,{field:"zip",header:"ZIP"}),n.a.createElement(M.Column,{field:"state",header:"State"}),n.a.createElement(M.Column,{field:"createdBy",header:"Created By"}),n.a.createElement(M.Column,{field:"picked",header:"Pickked"}),n.a.createElement(M.Column,{field:"shipped",header:"Shipped"}))))}}]),t}(s.Component),x=function(e){function t(){var e,r;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return(r=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).removeLineItem=function(e,t){r.props.RemoveLineItems(r.props.selectedOrder,t)},r.editLineItem=function(e,t){r.props.EditLineItems(t)},r.editItemUnits=function(e,t){r.props.UpdateLineUnits(e.target.value,t)},r.saveLineUnits=function(e,t){r.props.SaveLineUnits(r.props.selectedOrder,t)},r}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"scroller"},this.props.selectedOrder&&this.props.selectedOrder.lineItems&&this.props.selectedOrder.lineItems.map(function(t,r){return n.a.createElement("div",{className:"card card-line-item mb-3",key:r},n.a.createElement("div",{className:"card-body pb-2"},n.a.createElement("div",{className:"card-title-box d-flex flex-row justify-content-between"},n.a.createElement("label",{className:"card-title"},"NAME"),n.a.createElement("div",{className:"actions-box"},!t.editMode&&n.a.createElement("span",{className:"mr-3 icon-trash",onClick:function(r){return e.removeLineItem(r,t)}},n.a.createElement("i",{className:"fas fa-trash"})),!t.editMode&&n.a.createElement("span",{className:"ml-3 icon-edit",onClick:function(r){return e.editLineItem(r,t)}},n.a.createElement("i",{className:"fas fa-edit"})),t.editMode&&n.a.createElement("span",{className:"ml-3 icon-edit",onClick:function(r){return e.saveLineUnits(r,t)}},n.a.createElement("i",{className:"fas fa-save"})))),n.a.createElement("form",{className:"form app-form form-disabled mt-2"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"UOM"),n.a.createElement("input",{type:"text",id:"name",className:"form-control form-control-sm",value:t.uom,disabled:"true"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"COST"),n.a.createElement("input",{type:"text",id:"cost",className:"form-control form-control-sm",value:t.cost,disabled:"true"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"UNITS"),n.a.createElement("input",{type:"text",id:"units",className:"form-control form-control-sm",onChange:function(r){return e.editItemUnits(r,t)},disabled:!t.editMode,value:t.unit})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"DESCRIPTION"),n.a.createElement("textarea",{type:"text",id:"description",rows:"3",className:"form-control form-control-sm",value:t.desc,disabled:"true"})))))}))}}]),t}(s.Component),A=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(m.a)(this,Object(d.a)(t).call(this,e))).updateSearchLine=function(e){r.setState({searchLine:e.target.value}),r.triggerLineSearch()},r.triggerLineSearch=function(){r.props.RequestLineItems(r.state.searchLine,{first:0,rows:10})},r.toggleSelectLine=function(e,t){t.selected?r.props.UnSelectLineItems(r.props.selectedLines,t):r.props.SelectLineItems(r.props.selectedLines,t)},r.state={searchLine:""},r}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.RequestLineItems(this.state.searchLine,{first:0,rows:10})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"full-height"},n.a.createElement("form",{className:"search-box w-100"},n.a.createElement("div",{className:"input-group input-group-sm"},n.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search lineitem...",value:this.state.searchLine,onChange:this.updateSearchLine}),n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text"},n.a.createElement("i",{className:"fas fa-search"}))))),n.a.createElement("div",{className:"add-list-elements scroller"},n.a.createElement("ul",{className:"list-group"},this.props.lineItems&&this.props.lineItems.map(function(t,r){return n.a.createElement("li",{className:"list-group-item d-flex flex-row align-items-center",key:r,onClick:function(r){return e.toggleSelectLine(r,t)}},n.a.createElement("div",{className:"check-box"},n.a.createElement("i",{className:t.selected?"fas fa-check-square":"fas fa-square"})),n.a.createElement("div",{className:"content-box"},n.a.createElement("div",{className:"item-name"},n.a.createElement("label",null,"Item Name: "),n.a.createElement("span",null,t.uom)),n.a.createElement("div",{className:"item-description"},n.a.createElement("label",{className:"w-100"},"Description:"),n.a.createElement("span",{className:"text-justify"},t.desc))))}))))}}]),t}(s.Component),w=function(e){function t(){var e,r;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return(r=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).toggleLineItemMode=function(e,t){r.props.toggleLineItemMode(t)},r}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"full-height"},n.a.createElement("div",{className:"header py-3 px-3 mb-2 bg-white d-flex flex-row justify-content-between"},n.a.createElement("div",{className:"title-box"},n.a.createElement("label",{className:"title "},"DETAILS - LINE ITEM")),n.a.createElement("div",{className:"actions-box"},this.props.selectedOrder&&n.a.createElement("button",{type:"button",className:"btn btn-sm icon-save",onClick:function(t){return e.toggleLineItemMode(t,!e.props.lineItemMode)}},n.a.createElement("i",{className:this.props.lineItemMode?"fas fa-save":"fas fa-plus"})))),n.a.createElement("div",{className:"item-area"},!this.props.lineItemMode&&n.a.createElement(x,{selectedOrder:this.props.selectedOrder||this.props.orders&&this.props.orders[0],RemoveLineItems:this.props.RemoveLineItems,EditLineItems:this.props.EditLineItems,UpdateLineUnits:this.props.UpdateLineUnits,SaveLineUnits:this.props.SaveLineUnits}),this.props.lineItemMode&&n.a.createElement(A,{lineItems:this.props.lineItems,searchLineItems:this.props.searchLineItems,selectedLines:this.props.selectedLines,RequestLineItems:this.props.RequestLineItems,SelectLineItems:this.props.SelectLineItems,UnSelectLineItems:this.props.UnSelectLineItems})))}}]),t}(s.Component),k=function(e){function t(){var e,r;Object(l.a)(this,t);for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return(r=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).toggleLineItemMode=function(e){e||r.props.SaveLineItems(r.props.selectedOrder,r.props.selectedLines),r.props.ToggleLineItemMode(e)},r.updateCustomerValue=function(e){r.props.UpdateCustomerValue(e)},r.customerSelected=function(e){r.props.UpdateCustomerValue(e.customername),r.props.CustomerSelected(e),r.props.RequestOrders(e,r.props.orderOptions)},r.lazyLoadOrders=function(e){r.props.UpdateOrderOptions(r.props.orderOptions,"lazy",e,null),r.props.RequestOrders(r.props.selectedCustomer,r.props.orderOptions,r.props.selectedOrder)},r.sortLoadOrders=function(e){r.props.UpdateOrderOptions(r.props.orderOptions,"sort",null,e),r.props.RequestOrders(r.props.selectedCustomer,r.props.orderOptions,r.props.selectedOrder)},r.selectOrder=function(e){r.props.SelectOrder(e)},r}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("div",{className:"app-header"},n.a.createElement("div",{className:"app-main-header"},n.a.createElement("div",{className:"d-flex app-toolbar align-items-center justify-content-between"},n.a.createElement(T,{selectedCustomer:this.props.selectedCustomer}),n.a.createElement(U,{searchText:this.props.searchText,customers:this.props.customers,updateCustomerValue:this.updateCustomerValue,SearchCustomers:this.props.SearchCustomers,ClearCustomers:this.props.ClearCustomers,customerSelected:this.customerSelected})))),n.a.createElement("div",{className:"app-main-content d-flex flex-row"},n.a.createElement("section",{className:"content-left"},n.a.createElement(D,{orders:this.props.orders,selectOrder:this.props.SelectOrder,selectedOrder:this.props.selectedOrder||this.props.orders&&this.props.orders[0],lazyLoadOrders:this.lazyLoadOrders,orderOptions:this.props.orderOptions,sortLoadOrders:this.sortLoadOrders,selectedCustomer:this.props.selectedCustomer})),n.a.createElement("section",{className:"content-right d-flex flex-column border"},n.a.createElement(w,{selectedOrder:this.props.selectedOrder||this.props.orders&&this.props.orders[0],lineItems:this.props.lineItems,toggleLineItemMode:this.toggleLineItemMode,lineItemMode:this.props.lineItemMode,searchLineItems:this.props.SearchLineItems,RequestLineItems:this.props.RequestLineItems,RemoveLineItems:this.props.RemoveLineItems,EditLineItems:this.props.EditLineItems,UpdateLineUnits:this.props.UpdateLineUnits,SaveLineUnits:this.props.SaveLineUnits,selectedLines:this.props.selectedLines,SelectLineItems:this.props.SelectLineItems,UnSelectLineItems:this.props.UnSelectLineItems}))))}}]),t}(s.Component),P=Object(o.b)(function(e){return Object(S.a)({},e.homeState.componentState)},function(e){return{UpdateCustomerValue:function(e){return function(t){e({type:"UPDATE_CUSTOMER_VALUE",searchText:t})}}(e),SearchCustomers:v(e),ClearCustomers:N(e),CustomerSelected:function(e){return function(t){e({type:"CUSTOMER_SELECTED",selectedCustomer:t})}}(e),RequestOrders:function(e){return function(t,r,s){e({type:"FETCH_ORDERS"});var n=t.customerid;n+="?skip="+r.skip,n+="&limit="+r.limit,n+="&sortby="+r.sortby,n+="&sorthow="+r.sorthow,I("http://localhost:4000/api/order/bycustomer/"+n).then(function(e){return e.json()}).then(function(t){e({type:"FETCH_ORDERS_SUCCESS",orders:t,selectedOrder:s})}).then(function(t){e({type:"FETCH_ORDERS_FAILURE",error:"Error Message"})})}}(e),UpdateOrderOptions:function(e){return function(t,r,s,n){e({type:"UPDATE_ORDER_OPTIONS",orderOptions:t,mode:r,showSpan:s,sortParam:n})}}(e),RequestLineItems:function(e){return function(t,r){e({type:"FETCH_LINE_ITEMS"});var s=t||null;s+="?skip="+r.first+r.rows,s+="&limit="+r.rows,I("http://localhost:4000/api/product/byname/"+s).then(function(e){return e.json()}).then(function(s){e({type:"FETCH_LINE_ITEMS_SUCCESS",lineItems:s,searchLine:t,options:r})}).then(function(t){e({type:"FETCH_LINE_ITEMS_FAILURE",error:"Error Message"})})}}(e),SelectOrder:function(e){return function(t){e({type:"SELECT_ORDER",order:t})}}(e),ToggleLineItemMode:function(e){return function(t){e({type:"TOGGLE_LINE_ITEM_MODE",lineItemMode:t})}}(e),SearchLineItems:function(e){return function(t){e({type:"SEARCH_LINE_ITEMS",searchLine:t})}}(e),SaveLineItems:function(e){return function(t,r){var s=t.lineItems.concat(r);t.lineItems=s,e({type:"UPDATE_ORDER"}),L(C,t).then(function(e){return e.json()}).then(function(t){e({type:"UPDATE_ORDER_SUCCESS",success:t})}).then(function(t){e({type:"UPDATE_ORDER_FAILURE",error:"Error Message"})})}}(e),RemoveLineItems:function(e){return function(t,r){t.lineItems=t.lineItems.filter(function(e){return e.productid!==r.productid}),e({type:"UPDATE_ORDER"}),L(C,t).then(function(e){return e.json()}).then(function(t){e({type:"UPDATE_ORDER_SUCCESS",success:t})}).then(function(t){e({type:"UPDATE_ORDER_FAILURE",error:"Error Message"})})}}(e),EditLineItems:function(e){return function(t){e({type:"EDIT_LINE_ITEMS",item:t})}}(e),SelectLineItems:function(e){return function(t,r){e({type:"SELECT_LINE_ITEMS",selectedLines:t,item:r})}}(e),UnSelectLineItems:function(e){return function(t,r){e({type:"UNSELECT_LINE_ITEMS",selectedLines:t,item:r})}}(e),UpdateLineUnits:function(e){return function(t,r){e({type:"UPDATE_LINE_UNITS",unit:t,item:r})}}(e),SaveLineUnits:function(e){return function(t,r){t.lineItems=t.lineItems.map(function(e){return e.productid===r.productid&&(e=r),e}),e({type:"UPDATE_ORDER"}),L(C,t).then(function(e){return e.json()}).then(function(t){e({type:"UPDATE_ORDER_SUCCESS",success:t})}).then(function(t){e({type:"UPDATE_ORDER_FAILURE",error:"Error Message"})})}}(e)}})(k),H=Object(O.a)(),q=n.a.createElement(E.a,{history:H},n.a.createElement(h.a,null,n.a.createElement(f.a,{path:"/home",component:P}),n.a.createElement(f.a,{component:P}))),F=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,q)}}]),t}(s.Component),V=Object(o.b)()(F),z=r(15),G=r(42),B={searchText:"",customers:[],selectedCustomer:null,orders:[],orderOptions:{skip:0,limit:20,records:0,sortby:"date",sorthow:"desc",loading:!1},selectedOrder:null,lineItems:[],lineItemMode:!1,selectedLines:[]},J=Object(z.c)({componentState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_CUSTOMER_SUCCESS":return Object(S.a)({},e,{customers:t.customers});case"UPDATE_CUSTOMER_VALUE":return Object(S.a)({},e,{searchText:t.searchText});case"CLEAR_CUSTOMERS":return Object(S.a)({},e,{customers:[]});case"'UPDATE_CUSTOMERS":return t.searchText!==e.searchText?Object(S.a)({},e):Object(S.a)({},e,{customers:t.customers});case"CUSTOMER_SELECTED":return Object(S.a)({},e,{selectedCustomer:t.selectedCustomer});case"FETCH_ORDERS_SUCCESS":var r=e.orderOptions;return r.records=t.orders.count,r.loading=!1,Object(S.a)({},e,{orders:t.orders.docs,selectedOrder:t.selectedOrder?t.selectedOrder:t.orders.docs[0],orderOptions:r,selectedLines:[]});case"UPDATE_ORDER_OPTIONS":var s=t.orderOptions;return"lazy"===t.mode?s.skip=t.showSpan:"sort"===t.mode&&(s.sortby=t.sortParam.sortby,s.sorthow=t.sortParam.sorthow,s.skip=0),s.loading=!0,Object(S.a)({},e,{orderOptions:s});case"FETCH_LINE_ITEMS_SUCCESS":return Object(S.a)({},e,{lineItems:t.lineItems.docs});case"UPDATE_ORDER_SUCCESS":var n=e.orders,a=e.selectedOrder,o=e.lineItems.map(function(e){return e.selected=!1,e});return n.map(function(e){e.ordernumber===a.ordernumber&&(e=a);var t=e.lineItems.map(function(e){return e.editMode=!1,e});return e.lineItems=t,e}),Object(S.a)({},e,{orders:n,selectedOrder:a,lineItems:o,selectedLines:[],lineItemMode:!1});case"SELECT_ORDER":return Object(S.a)({},e,{selectedOrder:t.order,selectedLines:[],lineItems:e.lineItems.map(function(e){return e.selected=!1,e})});case"SEARCH_ORDER":return Object(S.a)({},e,{searchText:t.searchText});case"SEARCH_LINE_ITEMS":return Object(S.a)({},e,{searchLine:t.searchLine});case"TOGGLE_LINE_ITEM_MODE":return Object(S.a)({},e,{lineItemMode:t.lineItemMode});case"SELECT_LINE_ITEMS":var c=t.item;return c.selected=!0,Object(S.a)({},e,{selectedLines:Object(G.a)(e.selectedLines).concat([c])});case"UNSELECT_LINE_ITEMS":var i=e.lineItems.map(function(e){return e.productid===t.item.productid&&(e.selected=!1),e});return Object(S.a)({},e,{lineItems:i,selectedLines:e.selectedLines.filter(function(e){return e.productid!==t.item.productid})});case"SAVE_LINE_ITEMS":return Object(S.a)({},e,{selectedOrder:t.selectedOrder});case"EDIT_LINE_ITEMS":var l=e.selectedOrder.lineItems.map(function(e){return e.productid===t.item.productid&&(e.editMode=!0),e});return Object(S.a)({},e,{selectedOrder:Object(S.a)({},e.selectedOrder,{lineItems:l})});case"UPDATE_LINE_UNITS":var u=e.selectedOrder.lineItems.map(function(e){return e.productid===t.item.productid&&(e.unit=t.unit),e});return Object(S.a)({},e,{selectedOrder:Object(S.a)({},e.selectedOrder,{lineItems:u})});case"REMOVE_LINE_ITEMS":return Object(S.a)({},e,{selectedOrder:t.selectedOrder});default:return e}}}),Z=Object(z.c)({homeState:J}),K=[i.a],Q=Object(z.d)(Z,z.a.apply(void 0,K));i.a;var W=Q;Object(a.render)(n.a.createElement(o.a,{store:W},n.a.createElement(V,null)),document.getElementById("root"))},43:function(e,t,r){e.exports=r(105)},48:function(e,t,r){}},[[43,2,1]]]);
//# sourceMappingURL=main.256f76b9.chunk.js.map